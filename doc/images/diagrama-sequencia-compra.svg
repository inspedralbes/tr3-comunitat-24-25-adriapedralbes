<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 800">
  <!-- Estils i definicions -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
    
    <!-- Estil dels actors -->
    <linearGradient id="actorGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#f8f9fa" />
      <stop offset="100%" stop-color="#e9ecef" />
    </linearGradient>
    
    <!-- Estil de les línies de vida -->
    <linearGradient id="lifelineGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#f5f5f5" />
      <stop offset="100%" stop-color="#e9ecef" />
    </linearGradient>
    
    <!-- Estil dels focus d'activació -->
    <linearGradient id="activationGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#e9ecef" />
      <stop offset="100%" stop-color="#dee2e6" />
    </linearGradient>
  </defs>
  
  <!-- Fons -->
  <rect width="1000" height="800" fill="#ffffff" />
  
  <!-- Títol -->
  <text x="500" y="30" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle">Diagrama de Seqüència - Procés de Compra</text>
  
  <!-- Actors -->
  <rect x="80" y="60" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="130" y="90" font-family="Arial" font-size="14" text-anchor="middle">Usuari</text>
  
  <rect x="245" y="60" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="295" y="90" font-family="Arial" font-size="14" text-anchor="middle">Frontend</text>
  
  <rect x="445" y="60" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="495" y="90" font-family="Arial" font-size="14" text-anchor="middle">Backend</text>
  
  <rect x="645" y="60" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="695" y="90" font-family="Arial" font-size="14" text-anchor="middle">BD</text>
  
  <rect x="845" y="60" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="895" y="90" font-family="Arial" font-size="14" text-anchor="middle">Stripe</text>
  
  <!-- Línies de vida -->
  <line x1="130" y1="110" x2="130" y2="750" stroke="#333" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="295" y1="110" x2="295" y2="750" stroke="#333" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="495" y1="110" x2="495" y2="750" stroke="#333" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="695" y1="110" x2="695" y2="750" stroke="#333" stroke-width="1" stroke-dasharray="5,5" />
  <line x1="895" y1="110" x2="895" y2="750" stroke="#333" stroke-width="1" stroke-dasharray="5,5" />
  
  <!-- Actors al final (repetits) -->
  <rect x="80" y="750" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="130" y="780" font-family="Arial" font-size="14" text-anchor="middle">Usuari</text>
  
  <rect x="245" y="750" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="295" y="780" font-family="Arial" font-size="14" text-anchor="middle">Frontend</text>
  
  <rect x="445" y="750" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="495" y="780" font-family="Arial" font-size="14" text-anchor="middle">Backend</text>
  
  <rect x="645" y="750" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="695" y="780" font-family="Arial" font-size="14" text-anchor="middle">BD</text>
  
  <rect x="845" y="750" width="100" height="50" rx="5" ry="5" fill="url(#actorGradient)" stroke="#333" stroke-width="1.5" />
  <text x="895" y="780" font-family="Arial" font-size="14" text-anchor="middle">Stripe</text>
  
  <!-- Focus d'activació -->
  <!-- Usuari -->
  <rect x="125" y="150" width="10" height="550" fill="url(#activationGradient)" stroke="#333" stroke-width="1" />
  
  <!-- Frontend -->
  <rect x="290" y="170" width="10" height="510" fill="url(#activationGradient)" stroke="#333" stroke-width="1" />
  
  <!-- Backend -->
  <rect x="490" y="230" width="10" height="430" fill="url(#activationGradient)" stroke="#333" stroke-width="1" />
  
  <!-- BD -->
  <rect x="690" y="330" width="10" height="60" fill="url(#activationGradient)" stroke="#333" stroke-width="1" />
  <rect x="690" y="550" width="10" height="60" fill="url(#activationGradient)" stroke="#333" stroke-width="1" />
  
  <!-- Stripe -->
  <rect x="890" y="410" width="10" height="120" fill="url(#activationGradient)" stroke="#333" stroke-width="1" />
  
  <!-- Missatges -->
  <!-- 1. Seleccionar pla de subscripció -->
  <line x1="135" y1="170" x2="290" y2="170" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="213" y="160" font-family="Arial" font-size="12" text-anchor="middle">1. Selecciona pla</text>
  
  <!-- 2. Consultar detalls del pla -->
  <line x1="300" y1="230" x2="490" y2="230" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="395" y="220" font-family="Arial" font-size="12" text-anchor="middle">2. Consulta detalls del pla</text>
  
  <!-- 3. Consultar BD per obtenir detalls -->
  <line x1="500" y1="330" x2="690" y2="330" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="595" y="320" font-family="Arial" font-size="12" text-anchor="middle">3. Consulta el pla</text>
  
  <!-- 4. Retornar detalls del pla -->
  <line x1="690" y1="390" x2="500" y2="390" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="595" y="380" font-family="Arial" font-size="12" text-anchor="middle">4. Retorna detalls del pla</text>
  
  <!-- 5. Retornar detalls del pla al frontend -->
  <line x1="490" y1="270" x2="300" y2="270" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="395" y="260" font-family="Arial" font-size="12" text-anchor="middle">5. Retorna detalls del pla</text>
  
  <!-- 6. Mostrar formulari de pagament -->
  <line x1="290" y1="310" x2="135" y2="310" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="213" y="300" font-family="Arial" font-size="12" text-anchor="middle">6. Mostra formulari de pagament</text>
  
  <!-- 7. Enviar dades de pagament -->
  <line x1="135" y1="350" x2="290" y2="350" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="213" y="340" font-family="Arial" font-size="12" text-anchor="middle">7. Envia dades de pagament</text>
  
  <!-- 8. Enviar petició de subscripció -->
  <line x1="300" y1="410" x2="490" y2="410" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="395" y="400" font-family="Arial" font-size="12" text-anchor="middle">8. Envia petició de subscripció</text>
  
  <!-- 9. Crear intent de pagament -->
  <line x1="500" y1="450" x2="890" y2="450" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="695" y="440" font-family="Arial" font-size="12" text-anchor="middle">9. Crea intent de pagament</text>
  
  <!-- 10. Retornar resultat de Stripe -->
  <line x1="890" y1="530" x2="500" y2="530" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="695" y="520" font-family="Arial" font-size="12" text-anchor="middle">10. Retorna resultat</text>
  
  <!-- 11. Guardar subscripció -->
  <line x1="500" y1="570" x2="690" y2="570" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="595" y="560" font-family="Arial" font-size="12" text-anchor="middle">11. Guarda subscripció</text>
  
  <!-- 12. Confirmar subscripció guardada -->
  <line x1="690" y1="610" x2="500" y2="610" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="595" y="600" font-family="Arial" font-size="12" text-anchor="middle">12. Confirma subscripció</text>
  
  <!-- 13. Retornar resultat de la subscripció -->
  <line x1="490" y1="650" x2="300" y2="650" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="395" y="640" font-family="Arial" font-size="12" text-anchor="middle">13. Retorna resultat</text>
  
  <!-- 14. Mostrar confirmació -->
  <line x1="290" y1="700" x2="135" y2="700" stroke="#333" stroke-width="1.5" marker-end="url(#arrow)" />
  <text x="213" y="690" font-family="Arial" font-size="12" text-anchor="middle">14. Mostra confirmació</text>
  
  <!-- Notes -->
  <rect x="950" y="250" width="200" height="60" rx="5" ry="5" fill="#ffffd0" stroke="#333" stroke-width="1" />
  <text x="1050" y="270" font-family="Arial" font-size="12" text-anchor="middle">El formulari de pagament</text>
  <text x="1050" y="290" font-family="Arial" font-size="12" text-anchor="middle">s'implementa amb els</text>
  <text x="1050" y="310" font-family="Arial" font-size="12" text-anchor="middle">components de Stripe Elements</text>
  <line x1="950" y1="280" x2="300" y2="310" stroke="#333" stroke-width="1" stroke-dasharray="3,3" />
  
  <rect x="950" y="450" width="200" height="60" rx="5" ry="5" fill="#ffffd0" stroke="#333" stroke-width="1" />
  <text x="1050" y="470" font-family="Arial" font-size="12" text-anchor="middle">Stripe verifica la targeta</text>
  <text x="1050" y="490" font-family="Arial" font-size="12" text-anchor="middle">i processa el pagament</text>
  <text x="1050" y="510" font-family="Arial" font-size="12" text-anchor="middle">o la subscripció recurrent</text>
  <line x1="950" y1="480" x2="900" y2="480" stroke="#333" stroke-width="1" stroke-dasharray="3,3" />
  
</svg>